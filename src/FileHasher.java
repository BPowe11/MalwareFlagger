import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.security.DigestInputStream;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

public class FileHasher {
    private static String checksum(String filepath, MessageDigest md) throws IOException  {
        System.out.println("Attempting to obtain checksum");
        CapstoneGUI.statusUpdater("Attempting to obtain checksum");
        try (DigestInputStream dis = new DigestInputStream(new FileInputStream(filepath), md)){
            while(dis.read() != -1);
            md = dis.getMessageDigest();
        } catch (FileNotFoundException ex){
            CapstoneGUI.tryAgainCatch();
        }
        StringBuilder result = new StringBuilder();
        for (byte b : md.digest()){
            result.append(String.format("%02x", b));
        }
        CapstoneGUI.statusUpdater("Obtained Checksum");
        System.out.println("obtained checksum");
        return result.toString();
    }

    public static String getHexString(String userFile) throws NoSuchAlgorithmException, IOException{
        System.out.println("Attempting to obtain Hex");
        CapstoneGUI.statusUpdater("Attempting to obtain Hex");
        MessageDigest md = MessageDigest.getInstance("MD5");

        String hex = checksum(userFile, md);
        CapstoneGUI.statusUpdater("Hex Recieved");
        System.out.println("Hex recieved");
        return hex; 
    }
    public static String userInputEditor(String guiInput) {
        CapstoneGUI.statusUpdater("Editing input");
        System.out.println("Editing Input");
        String editedFilePath= "";
        String uneditedFilePath = guiInput;   
        
        for (int i = 0; i<uneditedFilePath.length(); i++){
            if(uneditedFilePath.charAt(i) == '\\'){
                editedFilePath+="\\";
            }
            editedFilePath += uneditedFilePath.charAt(i);
        }
        if (editedFilePath.charAt(0)=='"'){
            editedFilePath = editedFilePath.substring(1,editedFilePath.length()-1);
        }
        System.out.println(editedFilePath);
        CapstoneGUI.statusUpdater("Input edited");
        System.out.println("Input Edited");
        return editedFilePath;
    }
}
    /*public static String userInput() {
        String editedFilePath= "";
        Scanner fileObj = new Scanner(System.in);
        System.out.print("Please Paste File Path: ");
        String uneditedFilePath = fileObj.nextLine();   
        
        for (int i = 0; i<uneditedFilePath.length(); i++){
            if(uneditedFilePath.charAt(i) == '\\'){
                editedFilePath+="\\";
            }
            editedFilePath += uneditedFilePath.charAt(i);
        }
        fileObj.close();
        if (editedFilePath.charAt(0)=='"'){
            editedFilePath = editedFilePath.substring(1,editedFilePath.length()-1);
        }
        System.out.println(editedFilePath);
        return editedFilePath;
    }
    */
   
